import{h as v,F as T,ar as B,as as G,C as z,s as O,q as C,S as P,at as j,M as E,au as H,P as q,O as I,W as F,g as _}from"./OrbitControls.0aa6d8be.js";import{a as J,b as N,c as Q,d as K}from"./index.0281c40b.js";class W extends v{constructor(t){super(t)}load(t,e,o,s){const a=this,i=new T(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(t,function(c){const l=a.parse(JSON.parse(c));e&&e(l)},o,s)}parse(t){return new V(t)}}class V{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const o=[],s=D(t,e,this.data);for(let a=0,i=s.length;a<i;a++)o.push(...s[a].toShapes());return o}}function D(f,t,e){const o=Array.from(f),s=t/e.resolution,a=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*s,i=[];let c=0,l=0;for(let u=0;u<o.length;u++){const h=o[u];if(h===`
`)c=0,l-=a;else{const w=Z(h,s,c,l,e);c+=w.offsetX,i.push(w.path)}}return i}function Z(f,t,e,o,s){const a=s.glyphs[f]||s.glyphs["?"];if(!a){console.error('THREE.Font: character "'+f+'" does not exists in font family '+s.familyName+".");return}const i=new B;let c,l,u,h,w,m,g,p;if(a.o){const n=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(let r=0,U=n.length;r<U;)switch(n[r++]){case"m":c=n[r++]*t+e,l=n[r++]*t+o,i.moveTo(c,l);break;case"l":c=n[r++]*t+e,l=n[r++]*t+o,i.lineTo(c,l);break;case"q":u=n[r++]*t+e,h=n[r++]*t+o,w=n[r++]*t+e,m=n[r++]*t+o,i.quadraticCurveTo(w,m,u,h);break;case"b":u=n[r++]*t+e,h=n[r++]*t+o,w=n[r++]*t+e,m=n[r++]*t+o,g=n[r++]*t+e,p=n[r++]*t+o,i.bezierCurveTo(w,m,g,p,u,h);break}}return{offsetX:a.ha*t,path:i}}class X extends G{constructor(t,e={}){const o=e.font;if(o===void 0)super();else{const s=o.generateShapes(t,e.size);e.depth=e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(s,e)}this.type="TextGeometry"}}const Y=K("canvas",{class:"webgl"},null,-1),$=[Y],ne={__name:"donut",setup(f){return J(()=>{new URL(""+new URL("color.8bddf4c6.jpg",import.meta.url).href,self.location).href;const t=new URL(""+new URL("helvetiker_regular.typeface.d5c54676.json",import.meta.url).href,self.location).href;new URL(""+new URL("height.f095b2b9.jpg",import.meta.url).href,self.location).href,new URL(""+new URL("ambientOcclusion.9ebac441.jpg",import.meta.url).href,self.location).href,new URL(""+new URL("alpha.630f587e.jpg",import.meta.url).href,self.location).href,new URL(""+new URL("metalness.be88ad09.jpg",import.meta.url).href,self.location).href,new URL(""+new URL("normal.b4de8ab7.jpg",import.meta.url).href,self.location).href,new URL(""+new URL("roughness.a3deb372.jpg",import.meta.url).href,self.location).href;const e=new URL(""+new URL("7.b10f0207.png",import.meta.url).href,self.location).href;new URL(""+new URL("5.ab7b5715.jpg",import.meta.url).href,self.location).href,new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAACEUExURYyUnZKYoo6Vn36GkImRnIOLlgDe/5WbpJyhq4WNmH/4/3+HkYaOmXyDjqGnr52irKX8/+j+/6D8/4qSnIGJlHl/ipGXoZacpZmeqJSapIePmoCIk52jraestHqBjHuCjYKKlZOZo4uTnY+WoHd9iOf+/4SMl6KosO/8/5ugqn2Fj5+lrjRWI20AAAC/SURBVBjTFY9XbgNBDEM5s6qzvbn3xE67//0i/wgCSD6QAKOGAeq61xTP4mb9j1ne1gBcESoze+8dJlRYQBUJiTBUSrEuXJAyPI+qw2hBc2x0/piVbie019RA3/Q2UO5Q1eyGztkZUqkMEzcSiO0mJEy5OpRRuEI60P6L1HHH7Xe9NLAdtaWgTtb92R1nLDRGQOgcaeZdHMfwWuuGVxm/j5QQdaN9jJIrNblNMM2xznp8AkTv2XaJvrNm2Mke0H/3pAnMGVunewAAAABJRU5ErkJggg==",self.location).href,new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAIAQMAAAD+wSzIAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAGUExURf///wAAAFXC034AAAAPSURBVAjXY/jAAIH8EAgALgAD/Zpoe18AAAAASUVORK5CYII=",self.location).href;const o=new URL(""+new URL("px.1f013b51.jpg",import.meta.url).href,self.location).href,s=new URL(""+new URL("nx.3bb09a19.jpg",import.meta.url).href,self.location).href,a=new URL(""+new URL("py.4467b18b.jpg",import.meta.url).href,self.location).href,i=new URL(""+new URL("ny.7033c82f.jpg",import.meta.url).href,self.location).href,c=new URL(""+new URL("pz.c1662b92.jpg",import.meta.url).href,self.location).href,l=new URL(""+new URL("nz.f20dbad0.jpg",import.meta.url).href,self.location).href,h=new z().load([o,s,a,i,c,l]);h.encoding=O;const m=new C().load(e),g=document.querySelector("canvas.webgl"),p=new P;p.background=h;const n={width:window.innerWidth,height:window.innerHeight},r=new j({matcap:m});new W().load(t,R=>{const d=new X("Hello Portal",{font:R,size:.5,height:.2,curveSegments:12,bevelEnabled:!0,bevelThickness:.03,bevelSize:.02,bevelOffset:0,bevelSegment:5});d.center(),console.log("textGeometry",r);const L=new E(d,r);p.add(L)});const x=new H(.3,.2,20,45),S=new j({matcap:m});console.time("donut");for(let R=0;R<400;R++){const d=new E(x,S);d.position.x=(Math.random()-.5)*30,d.position.y=(Math.random()-.5)*30,d.position.z=(Math.random()-.5)*30,d.rotation.x=Math.random()*.5*Math.PI,d.rotation.y=Math.random()*.5*Math.PI;const L=Math.random();d.scale.set(L,L,L),p.add(d)}console.timeEnd("donut");const A=new q(75,n.width/n.height,.1,100);A.position.x=1,A.position.y=1,A.position.z=2,p.add(A);const y=new I(A,g);y.enableDamping=!0;const b=new F({canvas:g});b.setSize(n.width,n.height),b.setPixelRatio(Math.min(window.devicePixelRatio,2)),b.render(p,A),window.addEventListener("resize",R=>{n.width=window.innerWidth,n.height=window.innerHeight,A.aspect=n.width/n.height,A.updateProjectionMatrix(),b.setSize(n.width,n.height),b.setPixelRatio(Math.min(window.devicePixelRatio,2))}),window.addEventListener("dblclick",()=>{document.fullscreenElement?document.exitFullscreen():g.requestFullscreen()});const k=new _,M=()=>{k.getElapsedTime(),y.update(),b.render(p,A),window.requestAnimationFrame(M)};M()}),(t,e)=>(N(),Q("div",null,$))}};export{ne as default};
